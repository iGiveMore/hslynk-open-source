package com.servinglynk.hmis.warehouse.test;

import static com.servinglynk.hmis.warehouse.common.Constants.VERIFICATION_STATUS_ACCEPTED;
import static com.servinglynk.hmis.warehouse.common.Constants.VERIFICATION_TYPE_ACCOUNT_CREATION;
import static org.junit.Assert.assertNotNull;

import java.util.UUID;

import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import org.junit.Assert;
import org.junit.Before;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
import org.springframework.test.context.transaction.TransactionConfiguration;
import org.springframework.test.context.web.WebAppConfiguration;
import org.springframework.web.context.WebApplicationContext;

import com.servinglynk.hmis.warehouse.common.Constants;
import com.servinglynk.hmis.warehouse.config.ClientAPIConfig;
import com.servinglynk.hmis.warehouse.core.model.Account;
import com.servinglynk.hmis.warehouse.core.model.ApiMethod;
import com.servinglynk.hmis.warehouse.core.model.Client;
import com.servinglynk.hmis.warehouse.core.model.CommercialSexualExploitation;
import com.servinglynk.hmis.warehouse.core.model.CommercialSexualExploitations;
import com.servinglynk.hmis.warehouse.core.model.Enrollment;
import com.servinglynk.hmis.warehouse.core.model.Errors;
import com.servinglynk.hmis.warehouse.core.model.Organization;
import com.servinglynk.hmis.warehouse.core.model.Parameter;
import com.servinglynk.hmis.warehouse.core.model.PermissionSet;
import com.servinglynk.hmis.warehouse.core.model.Profile;
import com.servinglynk.hmis.warehouse.core.model.Session;
import com.servinglynk.hmis.warehouse.core.model.Verification;
import com.servinglynk.hmis.warehouse.service.core.ParentServiceFactory;
import com.servinglynk.hmis.warehouse.test.core.BasicTestMethods;
import com.servinglynk.hmis.warehouse.test.core.TestData;
import com.servinglynk.hmis.warehouse.test.core.WebserviceTestExecutor;

@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(classes = {ClientAPIConfig.class})
@WebAppConfiguration
@TransactionConfiguration(transactionManager = "transactionManager", defaultRollback = false)
public class TestCommercialSexualExploitationAPIMethods {

    protected final Log LOG = LogFactory.getLog(getClass());

    @Autowired WebApplicationContext wac;

    @Autowired ParentServiceFactory serviceFactory;

    
    BasicTestMethods basicTestMethods= null;
    @Before
    public void create() throws Exception {
    	basicTestMethods= new BasicTestMethods(wac,serviceFactory);
    }

    
    
    @Test
    public void TestCommercialSexualExploitationAPIMethods_1_create_CommercialSexualExploitation_testcase() throws Exception {
       Account account = basicTestMethods.createAccount();
       String[] methods = {"CLIENT_API_CREATE_COMMERCIAL_SEXUAL_EXPLOITATION","CLIENT_API_UPDATE_COMMERCIAL_SEXUAL_EXPLOITATION","CLIENT_API_DELETE_COMMERCIAL_SEXUAL_EXPLOITATION","CLIENT_API_GET_COMMERCIAL_SEXUAL_EXPLOITATION_BY_ID","CLIENT_API_GET_ALL_ENROLLMENT_COMMERCIAL_SEXUAL_EXPLOITATION"};
       basicTestMethods.addingMethodAccessUsingPermissionSet(methods, account.getUsername());
       Session session = basicTestMethods.createSession(account.getUsername(),account.getPassword());

       WebserviceTestExecutor executor = new WebserviceTestExecutor(wac);
       executor.setAcceptHeaderAsJson();
       executor.setContentTypeHeaderAsJson();
       executor.setHeaderValue("X-HMIS-TrustedApp-Id", "MASTER_TRUSTED_APP");
       executor.setHeaderValue("Authorization","HMISUserAuth session_token="+session.getToken());

       UUID clientId = basicTestMethods.createClient(); 
       UUID enrollmentId = basicTestMethods.createEnrollment(clientId); 
       CommercialSexualExploitation commercialSexualExploitation = TestData.getCommercialSexualExploitation();

       commercialSexualExploitation= executor.executePost("/clients/"+clientId+"/enrollments/"+enrollmentId+"/commercialSexualExploitations",commercialSexualExploitation,CommercialSexualExploitation.class);
       Assert.assertNotNull(commercialSexualExploitation.getCommercialsexualexploitationId()); 
   }

    @Test
    public void TestCommercialSexualExploitationAPIMethods_2_update_CommercialSexualExploitation_testcase() throws Exception {
       Account account = basicTestMethods.createAccount();
       String[] methods = {"CLIENT_API_CREATE_COMMERCIAL_SEXUAL_EXPLOITATION","CLIENT_API_UPDATE_COMMERCIAL_SEXUAL_EXPLOITATION","CLIENT_API_DELETE_COMMERCIAL_SEXUAL_EXPLOITATION","CLIENT_API_GET_COMMERCIAL_SEXUAL_EXPLOITATION_BY_ID","CLIENT_API_GET_ALL_ENROLLMENT_COMMERCIAL_SEXUAL_EXPLOITATION"};
       basicTestMethods.addingMethodAccessUsingPermissionSet(methods, account.getUsername());
       Session session = basicTestMethods.createSession(account.getUsername(),account.getPassword());

       WebserviceTestExecutor executor = new WebserviceTestExecutor(wac);
       executor.setAcceptHeaderAsJson();
       executor.setContentTypeHeaderAsJson();
       executor.setHeaderValue("X-HMIS-TrustedApp-Id", "MASTER_TRUSTED_APP");
       executor.setHeaderValue("Authorization","HMISUserAuth session_token="+session.getToken());

       UUID clientId = basicTestMethods.createClient(); 
       UUID enrollmentId = basicTestMethods.createEnrollment(clientId); 
       CommercialSexualExploitation commercialSexualExploitation = TestData.getCommercialSexualExploitation();

       commercialSexualExploitation= executor.executePost("/clients/"+clientId+"/enrollments/"+enrollmentId+"/commercialSexualExploitations",commercialSexualExploitation,CommercialSexualExploitation.class);
       Assert.assertNotNull(commercialSexualExploitation.getCommercialsexualexploitationId()); 
       // set new values for update the data
       commercialSexualExploitation= executor.executePut("/clients/"+clientId+"/enrollments/"+enrollmentId+"/commercialSexualExploitations/"+commercialSexualExploitation.getCommercialsexualexploitationId(),commercialSexualExploitation,CommercialSexualExploitation.class);
   }

    @Test
    public void TestCommercialSexualExploitationAPIMethods_3_delete_CommercialSexualExploitation_testcase() throws Exception {
       Account account = basicTestMethods.createAccount();
       String[] methods = {"CLIENT_API_CREATE_COMMERCIAL_SEXUAL_EXPLOITATION","CLIENT_API_UPDATE_COMMERCIAL_SEXUAL_EXPLOITATION","CLIENT_API_DELETE_COMMERCIAL_SEXUAL_EXPLOITATION","CLIENT_API_GET_COMMERCIAL_SEXUAL_EXPLOITATION_BY_ID","CLIENT_API_GET_ALL_ENROLLMENT_COMMERCIAL_SEXUAL_EXPLOITATION"};
       basicTestMethods.addingMethodAccessUsingPermissionSet(methods, account.getUsername());
       Session session = basicTestMethods.createSession(account.getUsername(),account.getPassword());

       WebserviceTestExecutor executor = new WebserviceTestExecutor(wac);
       executor.setAcceptHeaderAsJson();
       executor.setContentTypeHeaderAsJson();
       executor.setHeaderValue("X-HMIS-TrustedApp-Id", "MASTER_TRUSTED_APP");
       executor.setHeaderValue("Authorization","HMISUserAuth session_token="+session.getToken());

       UUID clientId = basicTestMethods.createClient(); 
       UUID enrollmentId = basicTestMethods.createEnrollment(clientId); 
       CommercialSexualExploitation commercialSexualExploitation = TestData.getCommercialSexualExploitation();

       commercialSexualExploitation= executor.executePost("/clients/"+clientId+"/enrollments/"+enrollmentId+"/commercialSexualExploitations",commercialSexualExploitation,CommercialSexualExploitation.class);
       Assert.assertNotNull(commercialSexualExploitation.getCommercialsexualexploitationId()); 

       commercialSexualExploitation= executor.executeDelete("/clients/"+clientId+"/enrollments/"+enrollmentId+"/commercialSexualExploitations/"+commercialSexualExploitation.getCommercialsexualexploitationId(),commercialSexualExploitation,CommercialSexualExploitation.class);
       Assert.assertNull(commercialSexualExploitation.getCommercialsexualexploitationId()); 
   }

    @Test
    public void TestCommercialSexualExploitationAPIMethods_4_getById_CommercialSexualExploitation_testcase() throws Exception {
       Account account = basicTestMethods.createAccount();
       String[] methods = {"CLIENT_API_CREATE_COMMERCIAL_SEXUAL_EXPLOITATION","CLIENT_API_UPDATE_COMMERCIAL_SEXUAL_EXPLOITATION","CLIENT_API_DELETE_COMMERCIAL_SEXUAL_EXPLOITATION","CLIENT_API_GET_COMMERCIAL_SEXUAL_EXPLOITATION_BY_ID","CLIENT_API_GET_ALL_ENROLLMENT_COMMERCIAL_SEXUAL_EXPLOITATION"};
       basicTestMethods.addingMethodAccessUsingPermissionSet(methods, account.getUsername());
       Session session = basicTestMethods.createSession(account.getUsername(),account.getPassword());

       WebserviceTestExecutor executor = new WebserviceTestExecutor(wac);
       executor.setAcceptHeaderAsJson();
       executor.setContentTypeHeaderAsJson();
       executor.setHeaderValue("X-HMIS-TrustedApp-Id", "MASTER_TRUSTED_APP");
       executor.setHeaderValue("Authorization","HMISUserAuth session_token="+session.getToken());

       UUID clientId = basicTestMethods.createClient(); 
       UUID enrollmentId = basicTestMethods.createEnrollment(clientId); 
       CommercialSexualExploitation commercialSexualExploitation = TestData.getCommercialSexualExploitation();

       commercialSexualExploitation= executor.executePost("/clients/"+clientId+"/enrollments/"+enrollmentId+"/commercialSexualExploitations",commercialSexualExploitation,CommercialSexualExploitation.class);
       Assert.assertNotNull(commercialSexualExploitation.getCommercialsexualexploitationId()); 

       CommercialSexualExploitation newcommercialSexualExploitation = executor.executeGet("/clients/"+clientId+"/enrollments/"+enrollmentId+"/commercialSexualExploitations/"+commercialSexualExploitation.getCommercialsexualexploitationId(),CommercialSexualExploitation.class);
       Assert.assertEquals(commercialSexualExploitation.getCommercialsexualexploitationId(),newcommercialSexualExploitation.getCommercialsexualexploitationId()); 
   }

    @Test
    public void TestCommercialSexualExploitationAPIMethods_5_getAllEnrollment_CommercialSexualExploitation_testcase() throws Exception {
       Account account = basicTestMethods.createAccount();
       String[] methods = {"CLIENT_API_CREATE_COMMERCIAL_SEXUAL_EXPLOITATION","CLIENT_API_UPDATE_COMMERCIAL_SEXUAL_EXPLOITATION","CLIENT_API_DELETE_COMMERCIAL_SEXUAL_EXPLOITATION","CLIENT_API_GET_COMMERCIAL_SEXUAL_EXPLOITATION_BY_ID","CLIENT_API_GET_ALL_ENROLLMENT_COMMERCIAL_SEXUAL_EXPLOITATION"};
       basicTestMethods.addingMethodAccessUsingPermissionSet(methods, account.getUsername());
       Session session = basicTestMethods.createSession(account.getUsername(),account.getPassword());

       WebserviceTestExecutor executor = new WebserviceTestExecutor(wac);
       executor.setAcceptHeaderAsJson();
       executor.setContentTypeHeaderAsJson();
       executor.setHeaderValue("X-HMIS-TrustedApp-Id", "MASTER_TRUSTED_APP");
       executor.setHeaderValue("Authorization","HMISUserAuth session_token="+session.getToken());

       UUID clientId = basicTestMethods.createClient(); 
       UUID enrollmentId = basicTestMethods.createEnrollment(clientId); 
       CommercialSexualExploitation commercialSexualExploitation = TestData.getCommercialSexualExploitation();

       commercialSexualExploitation= executor.executePost("/clients/"+clientId+"/enrollments/"+enrollmentId+"/commercialSexualExploitations",commercialSexualExploitation,CommercialSexualExploitation.class);
       Assert.assertNotNull(commercialSexualExploitation.getCommercialsexualexploitationId()); 

       CommercialSexualExploitations commercialSexualExploitations = executor.executeGet("/clients/"+clientId+"/enrollments/"+enrollmentId+"/commercialSexualExploitations",CommercialSexualExploitations.class);
       Assert.assertEquals(commercialSexualExploitations.getCommercialSexualExploitations().size(),1); 
       // creating another record     
       commercialSexualExploitation = TestData.getCommercialSexualExploitation();

       commercialSexualExploitation= executor.executePost("/clients/"+clientId+"/enrollments/"+enrollmentId+"/commercialSexualExploitations",commercialSexualExploitation,CommercialSexualExploitation.class);
       Assert.assertNotNull(commercialSexualExploitation.getCommercialsexualexploitationId()); 

       commercialSexualExploitations = executor.executeGet("/clients/"+clientId+"/enrollments/"+enrollmentId+"/commercialSexualExploitations",CommercialSexualExploitations.class);
       Assert.assertEquals(commercialSexualExploitations.getCommercialSexualExploitations().size(),2); 
   }

    @Test
    public void TestCommercialSexualExploitationAPIMethods_6_create_CommercialSexualExploitation_with_unknownClinet() throws Exception {
       Account account = basicTestMethods.createAccount();
       String[] methods = {"CLIENT_API_CREATE_COMMERCIAL_SEXUAL_EXPLOITATION","CLIENT_API_UPDATE_COMMERCIAL_SEXUAL_EXPLOITATION","CLIENT_API_DELETE_COMMERCIAL_SEXUAL_EXPLOITATION","CLIENT_API_GET_COMMERCIAL_SEXUAL_EXPLOITATION_BY_ID","CLIENT_API_GET_ALL_ENROLLMENT_COMMERCIAL_SEXUAL_EXPLOITATION"};
       basicTestMethods.addingMethodAccessUsingPermissionSet(methods, account.getUsername());
       Session session = basicTestMethods.createSession(account.getUsername(),account.getPassword());

       WebserviceTestExecutor executor = new WebserviceTestExecutor(wac);
       executor.setAcceptHeaderAsJson();
       executor.setContentTypeHeaderAsJson();
       executor.setHeaderValue("X-HMIS-TrustedApp-Id", "MASTER_TRUSTED_APP");
       executor.setHeaderValue("Authorization","HMISUserAuth session_token="+session.getToken());

       UUID clientId = basicTestMethods.createClient(); 
       UUID enrollmentId = basicTestMethods.createEnrollment(clientId); 
       clientId = UUID.randomUUID();
       CommercialSexualExploitation commercialSexualExploitation = TestData.getCommercialSexualExploitation();

       Errors errors = executor.executePost("/clients/"+clientId+"/enrollments/"+enrollmentId+"/commercialSexualExploitations",commercialSexualExploitation, Errors.class);
       Assert.assertNotNull(errors);
       Assert.assertEquals(errors.getError().get(0).getCode(),"CLIENT_NOT_FOUND"); 
   }

    @Test
    public void TestCommercialSexualExploitationAPIMethods_7_update_CommercialSexualExploitation_with_unknownClinet() throws Exception {
       Account account = basicTestMethods.createAccount();
       String[] methods = {"CLIENT_API_CREATE_COMMERCIAL_SEXUAL_EXPLOITATION","CLIENT_API_UPDATE_COMMERCIAL_SEXUAL_EXPLOITATION","CLIENT_API_DELETE_COMMERCIAL_SEXUAL_EXPLOITATION","CLIENT_API_GET_COMMERCIAL_SEXUAL_EXPLOITATION_BY_ID","CLIENT_API_GET_ALL_ENROLLMENT_COMMERCIAL_SEXUAL_EXPLOITATION"};
       basicTestMethods.addingMethodAccessUsingPermissionSet(methods, account.getUsername());
       Session session = basicTestMethods.createSession(account.getUsername(),account.getPassword());

       WebserviceTestExecutor executor = new WebserviceTestExecutor(wac);
       executor.setAcceptHeaderAsJson();
       executor.setContentTypeHeaderAsJson();
       executor.setHeaderValue("X-HMIS-TrustedApp-Id", "MASTER_TRUSTED_APP");
       executor.setHeaderValue("Authorization","HMISUserAuth session_token="+session.getToken());

       UUID clientId = basicTestMethods.createClient(); 
       UUID enrollmentId = basicTestMethods.createEnrollment(clientId); 
       CommercialSexualExploitation commercialSexualExploitation = TestData.getCommercialSexualExploitation();

       commercialSexualExploitation= executor.executePost("/clients/"+clientId+"/enrollments/"+enrollmentId+"/commercialSexualExploitations",commercialSexualExploitation,CommercialSexualExploitation.class);
       Assert.assertNotNull(commercialSexualExploitation.getCommercialsexualexploitationId()); 
       clientId = UUID.randomUUID();
       // set new values for update the data
       Errors errors = executor.executePut("/clients/"+clientId+"/enrollments/"+enrollmentId+"/commercialSexualExploitations/"+commercialSexualExploitation.getCommercialsexualexploitationId(),commercialSexualExploitation, Errors.class);
       Assert.assertNotNull(errors);
       Assert.assertEquals(errors.getError().get(0).getCode(),"CLIENT_NOT_FOUND"); 
   }

    @Test
    public void TestCommercialSexualExploitationAPIMethods_8_delete_CommercialSexualExploitation_with_unknownClinet() throws Exception {
       Account account = basicTestMethods.createAccount();
       String[] methods = {"CLIENT_API_CREATE_COMMERCIAL_SEXUAL_EXPLOITATION","CLIENT_API_UPDATE_COMMERCIAL_SEXUAL_EXPLOITATION","CLIENT_API_DELETE_COMMERCIAL_SEXUAL_EXPLOITATION","CLIENT_API_GET_COMMERCIAL_SEXUAL_EXPLOITATION_BY_ID","CLIENT_API_GET_ALL_ENROLLMENT_COMMERCIAL_SEXUAL_EXPLOITATION"};
       basicTestMethods.addingMethodAccessUsingPermissionSet(methods, account.getUsername());
       Session session = basicTestMethods.createSession(account.getUsername(),account.getPassword());

       WebserviceTestExecutor executor = new WebserviceTestExecutor(wac);
       executor.setAcceptHeaderAsJson();
       executor.setContentTypeHeaderAsJson();
       executor.setHeaderValue("X-HMIS-TrustedApp-Id", "MASTER_TRUSTED_APP");
       executor.setHeaderValue("Authorization","HMISUserAuth session_token="+session.getToken());

       UUID clientId = basicTestMethods.createClient(); 
       UUID enrollmentId = basicTestMethods.createEnrollment(clientId); 
       CommercialSexualExploitation commercialSexualExploitation = TestData.getCommercialSexualExploitation();

       commercialSexualExploitation= executor.executePost("/clients/"+clientId+"/enrollments/"+enrollmentId+"/commercialSexualExploitations",commercialSexualExploitation,CommercialSexualExploitation.class);
       Assert.assertNotNull(commercialSexualExploitation.getCommercialsexualexploitationId()); 

       clientId = UUID.randomUUID();
       Errors errors = executor.executeDelete("/clients/"+clientId+"/enrollments/"+enrollmentId+"/commercialSexualExploitations/"+commercialSexualExploitation.getCommercialsexualexploitationId(),commercialSexualExploitation,Errors.class);
       Assert.assertNotNull(errors);
       Assert.assertEquals(errors.getError().get(0).getCode(),"CLIENT_NOT_FOUND"); 
   }

    @Test
    public void TestCommercialSexualExploitationAPIMethods_9_getById_CommercialSexualExploitation_with_unknownClinet() throws Exception {
       Account account = basicTestMethods.createAccount();
       String[] methods = {"CLIENT_API_CREATE_COMMERCIAL_SEXUAL_EXPLOITATION","CLIENT_API_UPDATE_COMMERCIAL_SEXUAL_EXPLOITATION","CLIENT_API_DELETE_COMMERCIAL_SEXUAL_EXPLOITATION","CLIENT_API_GET_COMMERCIAL_SEXUAL_EXPLOITATION_BY_ID","CLIENT_API_GET_ALL_ENROLLMENT_COMMERCIAL_SEXUAL_EXPLOITATION"};
       basicTestMethods.addingMethodAccessUsingPermissionSet(methods, account.getUsername());
       Session session = basicTestMethods.createSession(account.getUsername(),account.getPassword());

       WebserviceTestExecutor executor = new WebserviceTestExecutor(wac);
       executor.setAcceptHeaderAsJson();
       executor.setContentTypeHeaderAsJson();
       executor.setHeaderValue("X-HMIS-TrustedApp-Id", "MASTER_TRUSTED_APP");
       executor.setHeaderValue("Authorization","HMISUserAuth session_token="+session.getToken());

       UUID clientId = basicTestMethods.createClient(); 
       UUID enrollmentId = basicTestMethods.createEnrollment(clientId); 
       CommercialSexualExploitation commercialSexualExploitation = TestData.getCommercialSexualExploitation();

       commercialSexualExploitation= executor.executePost("/clients/"+clientId+"/enrollments/"+enrollmentId+"/commercialSexualExploitations",commercialSexualExploitation,CommercialSexualExploitation.class);
       Assert.assertNotNull(commercialSexualExploitation.getCommercialsexualexploitationId()); 

       clientId = UUID.randomUUID();
       Errors errors = executor.executeGet("/clients/"+clientId+"/enrollments/"+enrollmentId+"/commercialSexualExploitations/"+commercialSexualExploitation.getCommercialsexualexploitationId(),Errors.class);
       Assert.assertNotNull(errors);
       Assert.assertEquals(errors.getError().get(0).getCode(),"CLIENT_NOT_FOUND"); 
   }

    @Test
    public void TestCommercialSexualExploitationAPIMethods_10_getAllEnrollment_CommercialSexualExploitation_with_unknowClient() throws Exception {
       Account account = basicTestMethods.createAccount();
       String[] methods = {"CLIENT_API_CREATE_COMMERCIAL_SEXUAL_EXPLOITATION","CLIENT_API_UPDATE_COMMERCIAL_SEXUAL_EXPLOITATION","CLIENT_API_DELETE_COMMERCIAL_SEXUAL_EXPLOITATION","CLIENT_API_GET_COMMERCIAL_SEXUAL_EXPLOITATION_BY_ID","CLIENT_API_GET_ALL_ENROLLMENT_COMMERCIAL_SEXUAL_EXPLOITATION"};
       basicTestMethods.addingMethodAccessUsingPermissionSet(methods, account.getUsername());
       Session session = basicTestMethods.createSession(account.getUsername(),account.getPassword());

       WebserviceTestExecutor executor = new WebserviceTestExecutor(wac);
       executor.setAcceptHeaderAsJson();
       executor.setContentTypeHeaderAsJson();
       executor.setHeaderValue("X-HMIS-TrustedApp-Id", "MASTER_TRUSTED_APP");
       executor.setHeaderValue("Authorization","HMISUserAuth session_token="+session.getToken());

       UUID clientId = basicTestMethods.createClient(); 
       UUID enrollmentId = basicTestMethods.createEnrollment(clientId); 
       CommercialSexualExploitation commercialSexualExploitation = TestData.getCommercialSexualExploitation();

       commercialSexualExploitation= executor.executePost("/clients/"+clientId+"/enrollments/"+enrollmentId+"/commercialSexualExploitations",commercialSexualExploitation,CommercialSexualExploitation.class);
       Assert.assertNotNull(commercialSexualExploitation.getCommercialsexualexploitationId()); 

       // creating another record     
       commercialSexualExploitation = TestData.getCommercialSexualExploitation();

       commercialSexualExploitation= executor.executePost("/clients/"+clientId+"/enrollments/"+enrollmentId+"/commercialSexualExploitations",commercialSexualExploitation,CommercialSexualExploitation.class);
       Assert.assertNotNull(commercialSexualExploitation.getCommercialsexualexploitationId()); 

       clientId = UUID.randomUUID();
       Errors errors = executor.executeGet("/clients/"+clientId+"/enrollments/"+enrollmentId+"/commercialSexualExploitations",Errors.class);
       Assert.assertNotNull(errors);
       Assert.assertEquals(errors.getError().get(0).getCode(),"CLIENT_NOT_FOUND"); 
   }

    @Test
    public void TestCommercialSexualExploitationAPIMethods_11_create_CommercialSexualExploitation_with_unknownEnrollment() throws Exception {
       Account account = basicTestMethods.createAccount();
       String[] methods = {"CLIENT_API_CREATE_COMMERCIAL_SEXUAL_EXPLOITATION","CLIENT_API_UPDATE_COMMERCIAL_SEXUAL_EXPLOITATION","CLIENT_API_DELETE_COMMERCIAL_SEXUAL_EXPLOITATION","CLIENT_API_GET_COMMERCIAL_SEXUAL_EXPLOITATION_BY_ID","CLIENT_API_GET_ALL_ENROLLMENT_COMMERCIAL_SEXUAL_EXPLOITATION"};
       basicTestMethods.addingMethodAccessUsingPermissionSet(methods, account.getUsername());
       Session session = basicTestMethods.createSession(account.getUsername(),account.getPassword());

       WebserviceTestExecutor executor = new WebserviceTestExecutor(wac);
       executor.setAcceptHeaderAsJson();
       executor.setContentTypeHeaderAsJson();
       executor.setHeaderValue("X-HMIS-TrustedApp-Id", "MASTER_TRUSTED_APP");
       executor.setHeaderValue("Authorization","HMISUserAuth session_token="+session.getToken());

       UUID clientId = basicTestMethods.createClient(); 
       UUID enrollmentId = basicTestMethods.createEnrollment(clientId); 
       enrollmentId = UUID.randomUUID();
       CommercialSexualExploitation commercialSexualExploitation = TestData.getCommercialSexualExploitation();

       Errors errors = executor.executePost("/clients/"+clientId+"/enrollments/"+enrollmentId+"/commercialSexualExploitations",commercialSexualExploitation, Errors.class);
       Assert.assertNotNull(errors);
       Assert.assertEquals(errors.getError().get(0).getCode(),"ENROLLMENT_NOT_FOUND"); 
   }

    @Test
    public void TestCommercialSexualExploitationAPIMethods_12_update_CommercialSexualExploitation_with_unknownEnrollment() throws Exception {
       Account account = basicTestMethods.createAccount();
       String[] methods = {"CLIENT_API_CREATE_COMMERCIAL_SEXUAL_EXPLOITATION","CLIENT_API_UPDATE_COMMERCIAL_SEXUAL_EXPLOITATION","CLIENT_API_DELETE_COMMERCIAL_SEXUAL_EXPLOITATION","CLIENT_API_GET_COMMERCIAL_SEXUAL_EXPLOITATION_BY_ID","CLIENT_API_GET_ALL_ENROLLMENT_COMMERCIAL_SEXUAL_EXPLOITATION"};
       basicTestMethods.addingMethodAccessUsingPermissionSet(methods, account.getUsername());
       Session session = basicTestMethods.createSession(account.getUsername(),account.getPassword());

       WebserviceTestExecutor executor = new WebserviceTestExecutor(wac);
       executor.setAcceptHeaderAsJson();
       executor.setContentTypeHeaderAsJson();
       executor.setHeaderValue("X-HMIS-TrustedApp-Id", "MASTER_TRUSTED_APP");
       executor.setHeaderValue("Authorization","HMISUserAuth session_token="+session.getToken());

       UUID clientId = basicTestMethods.createClient(); 
       UUID enrollmentId = basicTestMethods.createEnrollment(clientId); 
       CommercialSexualExploitation commercialSexualExploitation = TestData.getCommercialSexualExploitation();

       commercialSexualExploitation= executor.executePost("/clients/"+clientId+"/enrollments/"+enrollmentId+"/commercialSexualExploitations",commercialSexualExploitation,CommercialSexualExploitation.class);
       Assert.assertNotNull(commercialSexualExploitation.getCommercialsexualexploitationId()); 
       enrollmentId = UUID.randomUUID();
       // set new values for update the data
       Errors errors = executor.executePut("/clients/"+clientId+"/enrollments/"+enrollmentId+"/commercialSexualExploitations/"+commercialSexualExploitation.getCommercialsexualexploitationId(),commercialSexualExploitation, Errors.class);
       Assert.assertNotNull(errors);
       Assert.assertEquals(errors.getError().get(0).getCode(),"ENROLLMENT_NOT_FOUND"); 
   }

    @Test
    public void TestCommercialSexualExploitationAPIMethods_13_delete_CommercialSexualExploitation_with_unknownEnrollment() throws Exception {
       Account account = basicTestMethods.createAccount();
       String[] methods = {"CLIENT_API_CREATE_COMMERCIAL_SEXUAL_EXPLOITATION","CLIENT_API_UPDATE_COMMERCIAL_SEXUAL_EXPLOITATION","CLIENT_API_DELETE_COMMERCIAL_SEXUAL_EXPLOITATION","CLIENT_API_GET_COMMERCIAL_SEXUAL_EXPLOITATION_BY_ID","CLIENT_API_GET_ALL_ENROLLMENT_COMMERCIAL_SEXUAL_EXPLOITATION"};
       basicTestMethods.addingMethodAccessUsingPermissionSet(methods, account.getUsername());
       Session session = basicTestMethods.createSession(account.getUsername(),account.getPassword());

       WebserviceTestExecutor executor = new WebserviceTestExecutor(wac);
       executor.setAcceptHeaderAsJson();
       executor.setContentTypeHeaderAsJson();
       executor.setHeaderValue("X-HMIS-TrustedApp-Id", "MASTER_TRUSTED_APP");
       executor.setHeaderValue("Authorization","HMISUserAuth session_token="+session.getToken());

       UUID clientId = basicTestMethods.createClient(); 
       UUID enrollmentId = basicTestMethods.createEnrollment(clientId); 
       CommercialSexualExploitation commercialSexualExploitation = TestData.getCommercialSexualExploitation();

       commercialSexualExploitation= executor.executePost("/clients/"+clientId+"/enrollments/"+enrollmentId+"/commercialSexualExploitations",commercialSexualExploitation,CommercialSexualExploitation.class);
       Assert.assertNotNull(commercialSexualExploitation.getCommercialsexualexploitationId()); 

       enrollmentId = UUID.randomUUID();
       Errors errors = executor.executeDelete("/clients/"+clientId+"/enrollments/"+enrollmentId+"/commercialSexualExploitations/"+commercialSexualExploitation.getCommercialsexualexploitationId(),commercialSexualExploitation,Errors.class);
       Assert.assertNotNull(errors);
       Assert.assertEquals(errors.getError().get(0).getCode(),"ENROLLMENT_NOT_FOUND"); 
   }

    @Test
    public void TestCommercialSexualExploitationAPIMethods_14_getById_CommercialSexualExploitation_with_unknownEnrollment() throws Exception {
       Account account = basicTestMethods.createAccount();
       String[] methods = {"CLIENT_API_CREATE_COMMERCIAL_SEXUAL_EXPLOITATION","CLIENT_API_UPDATE_COMMERCIAL_SEXUAL_EXPLOITATION","CLIENT_API_DELETE_COMMERCIAL_SEXUAL_EXPLOITATION","CLIENT_API_GET_COMMERCIAL_SEXUAL_EXPLOITATION_BY_ID","CLIENT_API_GET_ALL_ENROLLMENT_COMMERCIAL_SEXUAL_EXPLOITATION"};
       basicTestMethods.addingMethodAccessUsingPermissionSet(methods, account.getUsername());
       Session session = basicTestMethods.createSession(account.getUsername(),account.getPassword());

       WebserviceTestExecutor executor = new WebserviceTestExecutor(wac);
       executor.setAcceptHeaderAsJson();
       executor.setContentTypeHeaderAsJson();
       executor.setHeaderValue("X-HMIS-TrustedApp-Id", "MASTER_TRUSTED_APP");
       executor.setHeaderValue("Authorization","HMISUserAuth session_token="+session.getToken());

       UUID clientId = basicTestMethods.createClient(); 
       UUID enrollmentId = basicTestMethods.createEnrollment(clientId); 
       CommercialSexualExploitation commercialSexualExploitation = TestData.getCommercialSexualExploitation();

       commercialSexualExploitation= executor.executePost("/clients/"+clientId+"/enrollments/"+enrollmentId+"/commercialSexualExploitations",commercialSexualExploitation,CommercialSexualExploitation.class);
       Assert.assertNotNull(commercialSexualExploitation.getCommercialsexualexploitationId()); 

       enrollmentId = UUID.randomUUID();
       Errors errors = executor.executeGet("/clients/"+clientId+"/enrollments/"+enrollmentId+"/commercialSexualExploitations/"+commercialSexualExploitation.getCommercialsexualexploitationId(),Errors.class);
       Assert.assertNotNull(errors);
       Assert.assertEquals(errors.getError().get(0).getCode(),"ENROLLMENT_NOT_FOUND"); 
   }

    @Test
    public void TestCommercialSexualExploitationAPIMethods_15_getAllEnrollment_CommercialSexualExploitation_with_unknowEnrollment() throws Exception {
       Account account = basicTestMethods.createAccount();
       String[] methods = {"CLIENT_API_CREATE_COMMERCIAL_SEXUAL_EXPLOITATION","CLIENT_API_UPDATE_COMMERCIAL_SEXUAL_EXPLOITATION","CLIENT_API_DELETE_COMMERCIAL_SEXUAL_EXPLOITATION","CLIENT_API_GET_COMMERCIAL_SEXUAL_EXPLOITATION_BY_ID","CLIENT_API_GET_ALL_ENROLLMENT_COMMERCIAL_SEXUAL_EXPLOITATION"};
       basicTestMethods.addingMethodAccessUsingPermissionSet(methods, account.getUsername());
       Session session = basicTestMethods.createSession(account.getUsername(),account.getPassword());

       WebserviceTestExecutor executor = new WebserviceTestExecutor(wac);
       executor.setAcceptHeaderAsJson();
       executor.setContentTypeHeaderAsJson();
       executor.setHeaderValue("X-HMIS-TrustedApp-Id", "MASTER_TRUSTED_APP");
       executor.setHeaderValue("Authorization","HMISUserAuth session_token="+session.getToken());

       UUID clientId = basicTestMethods.createClient(); 
       UUID enrollmentId = basicTestMethods.createEnrollment(clientId); 
       CommercialSexualExploitation commercialSexualExploitation = TestData.getCommercialSexualExploitation();

       commercialSexualExploitation= executor.executePost("/clients/"+clientId+"/enrollments/"+enrollmentId+"/commercialSexualExploitations",commercialSexualExploitation,CommercialSexualExploitation.class);
       Assert.assertNotNull(commercialSexualExploitation.getCommercialsexualexploitationId()); 

       // creating another record     
       commercialSexualExploitation = TestData.getCommercialSexualExploitation();

       commercialSexualExploitation= executor.executePost("/clients/"+clientId+"/enrollments/"+enrollmentId+"/commercialSexualExploitations",commercialSexualExploitation,CommercialSexualExploitation.class);
       Assert.assertNotNull(commercialSexualExploitation.getCommercialsexualexploitationId()); 

       enrollmentId = UUID.randomUUID();
       Errors errors = executor.executeGet("/clients/"+clientId+"/enrollments/"+enrollmentId+"/commercialSexualExploitations",Errors.class);
       Assert.assertNotNull(errors);
       Assert.assertEquals(errors.getError().get(0).getCode(),"ENROLLMENT_NOT_FOUND"); 
   }

}
